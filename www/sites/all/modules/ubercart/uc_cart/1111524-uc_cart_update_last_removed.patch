diff --git a/uc_cart/uc_cart.install b/uc_cart/uc_cart.install
index ceff514..53474a5 100644
--- a/uc_cart/uc_cart.install
+++ b/uc_cart/uc_cart.install
@@ -94,7 +94,9 @@ function uc_cart_uninstall() {
  * Implements hook_update_last_removed().
  */
 function uc_cart_update_last_removed() {
-  return 6202;
+  // 7.x-3.0-beta2 and earlier were installed with schema version 0,
+  // which causes update.php to fail.
+  return drupal_get_installed_schema_version('uc_cart') == 0 ? 0 : 6202;
 }
 
 /**
